<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Orders Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: Manrope; padding: 20px; background: #f4f5f7; }
        .top-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        table { width: 100%; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        th, td { padding: 12px; border-bottom: 1px solid #eee; text-align: left; }
        th { background: #2a7de1; color: white; }
        .nav-btn { background: #333; color: white; padding: 8px 15px; border-radius: 5px; text-decoration: none; }
    </style>
</head>
<body>
    <div class="top-bar">
        <h2>ðŸ›’ Active Orders</h2>
        <div>
            <a href="admin-products.html" class="nav-btn">Manage Inventory</a>
            <button onclick="loadOrders()" style="padding:8px 15px; cursor:pointer;">Refresh</button>
        </div>
    </div>
    <table id="ordersTable">
        <thead>
            <tr><th>Customer</th><th>Phone</th><th>Items</th><th>Total</th><th>Date</th></tr>
        </thead>
        <tbody id="order-body"></tbody>
    </table>

    <script>
        async function loadOrders() {
            try {
                const res = await fetch("/api/orders/all");
                const data = await res.json();
                if (data.success) {
                    document.getElementById("order-body").innerHTML = data.orders.map(o => `
                        <tr>
                            <td><strong>${o.customerName}</strong><br><small>${o.address}</small></td>
                            <td>${o.phone}</td>
                            <td>${o.items.map(i => `${i.name} (x${i.quantity})`).join(", ")}</td>
                            <td>â‚¹${o.totalAmount}</td>
                            <td>${new Date(o.createdAt).toLocaleDateString()}</td>
                        </tr>
                    `).join("");
                }
            } catch (err) { console.error(err); }
        }
        loadOrders();
    </script>
</body>
</html>